// Simple utilities for mocking redis clients

package testutil

import "time"

type RedisClient struct {
	GetF   func(string) (string, error)
	SetF   func(string, interface{}, time.Duration) (string, error)
	DelF   func(...string) (int64, error)
	CloseF func() error
}

func (r *RedisClient) Get(k string) (string, error) {
	if r.GetF != nil {
		return r.GetF(k)
	}

	return "", nil
}

func (r *RedisClient) Set(k string, v interface{}, x time.Duration) (string, error) {
	if r.SetF != nil {
		return r.SetF(k, v, x)
	}

	return "", nil
}

func (r *RedisClient) Del(k ...string) (int64, error) {
	if r.DelF != nil {
		return r.DelF(k...)
	}

	return 0, nil
}

func (r *RedisClient) Close() error {
	if r.CloseF != nil {
		return r.CloseF()
	}

	return nil
}
